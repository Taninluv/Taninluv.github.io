<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>cURL</title><meta name="description" content="Buona notte"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="cURL####将内容输出到文件中： -O   -o
我们看到cURL不像web浏览器那样呈现HTML&amp;#x2F;JavaScript&amp;#x2F;CSS代码，而是以原始格式打印它。然而，作为渗透测试人员，我们主要对请求和响应上下文感兴趣，它通常比web浏览器更快、更方便。我们也可以使用cURL下载页面或文件，并使用-O标志将内容输出到文件中。如果我们想指定输出文件名，我们可以使用-o标志并指定名称。否则，我们可以使用-O，cURL将使用远程文件名，如下所示：
Tanin@htb[/htb]$ curl inlanefreight.com

&amp;lt;!DOCTYPE HTML PUBLIC &amp;quot;-//IETF//DTD HTML 2.0//EN&amp;quot;&amp;gt;
&amp;lt;html&amp;gt;&amp;lt;he.."><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Salve" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Taninluv's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">cURL</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#cURL"><span class="toc-text">cURL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%B3%E8%BF%87cURL%E7%9A%84%E8%AF%81%E4%B9%A6%E6%A3%80%E6%9F%A5%EF%BC%9A-k"><span class="toc-text">跳过cURL的证书检查：-k</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%8C%E6%95%B4%E7%9A%84HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%EF%BC%9A-v"><span class="toc-text">查看完整的HTTP请求和响应：-v</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AA%E6%98%BE%E7%A4%BA%E5%93%8D%E5%BA%94%E6%A0%87%E5%A4%B4%EF%BC%9A-i"><span class="toc-text">只显示响应标头：-i</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E6%A0%87%E5%A4%B4%EF%BC%9A-H"><span class="toc-text">设置请求标头：-H</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-Basic-Auth%EF%BC%9A-u"><span class="toc-text">HTTP Basic Auth：-u</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86%EF%BC%9A-A"><span class="toc-text">用户代理：-A</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie%EF%BC%9A-b-%E2%80%93cookie"><span class="toc-text">Cookie：-b  –cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%9A-L-%E2%80%93location"><span class="toc-text">重定向：-L   –location</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#POST"><span class="toc-text">POST</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96json-%EF%BC%9A-jq"><span class="toc-text">格式化json ：| jq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E9%BB%98-s"><span class="toc-text">静默 -s</span></a></li></ol></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/base"><i class="tag post-item-tag">base</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">cURL</h1><time class="has-text-grey" datetime="2023-06-11T15:32:02.000Z">2023-06-11</time><article class="mt-2 post-content"><h1 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h1><p>####将内容输出到文件中： -O   -o</p>
<p>我们看到cURL不像web浏览器那样呈现HTML&#x2F;JavaScript&#x2F;CSS代码，而是以原始格式打印它。然而，作为渗透测试人员，我们主要对请求和响应上下文感兴趣，它通常比web浏览器更快、更方便。<br>我们也可以使用cURL下载页面或文件，并使用-O标志将内容输出到文件中。如果我们想指定输出文件名，我们可以使用-o标志并指定名称。否则，我们可以使用-O，cURL将使用远程文件名，如下所示：</p>
<pre><code>Tanin@htb[/htb]$ curl inlanefreight.com

&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;
&lt;html&gt;&lt;head&gt;
...SNIP...
</code></pre>
<pre><code>Tanin@htb[/htb]$ curl -O inlanefreight.com/index.html
Tanin@htb[/htb]$ ls
index.html
</code></pre>
<span id="more"></span>

<h4 id="跳过cURL的证书检查：-k"><a href="#跳过cURL的证书检查：-k" class="headerlink" title="跳过cURL的证书检查：-k"></a>跳过cURL的证书检查：-k</h4><p>现代网络浏览器也会这样做，警告用户不要访问具有无效SSL证书的网站。<br>我们在测试本地web应用程序或使用托管用于实践目的的web应用程序时可能会面临这样的问题，因为此类web应用程序可能尚未实现有效的SSL证书。要跳过cURL的证书检查，我们可以使用-k标志：</p>
<pre><code>Tanin@htb[/htb]$ curl -k https://inlanefreight.com

&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;
&lt;html&gt;&lt;head&gt;
...SNIP...
</code></pre>
<h4 id="查看完整的HTTP请求和响应：-v"><a href="#查看完整的HTTP请求和响应：-v" class="headerlink" title="查看完整的HTTP请求和响应：-v"></a>查看完整的HTTP请求和响应：-v</h4><p>在我们前面的cURL示例中，我们只指定了URL，并得到了返回的响应体。然而，cURL还允许我们预览完整的HTTP请求和完整的HTTP响应，这在执行web渗透测试或编写漏洞时会变得非常方便。要查看完整的HTTP请求和响应，我们可以简单地在前面的命令中添加-v verbose标志，它应该同时打印请求和响应：</p>
<pre><code>Tanin@htb[/htb]$ curl inlanefreight.com -v

*   Trying SERVER_IP:80...
* TCP_NODELAY set
* Connected to inlanefreight.com (SERVER_IP) port 80 (#0)
&gt; GET / HTTP/1.1
&gt; Host: inlanefreight.com
&gt; User-Agent: curl/7.65.3
&gt; Accept: */*
&gt; Connection: close
&gt; 
* Mark bundle as not supporting multiuse
&lt; HTTP/1.1 401 Unauthorized
&lt; Date: Tue, 21 Jul 2020 05:20:15 GMT
&lt; Server: Apache/X.Y.ZZ (Ubuntu)
&lt; WWW-Authenticate: Basic realm=&quot;Restricted Content&quot;
&lt; Content-Length: 464
&lt; Content-Type: text/html; charset=iso-8859-1
&lt; 
&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;
&lt;html&gt;&lt;head&gt;

...SNIP...
</code></pre>
<p>-vvv标志显示了一个更加详细的输出。</p>
<h4 id="只显示响应标头：-i"><a href="#只显示响应标头：-i" class="headerlink" title="只显示响应标头：-i"></a>只显示响应标头：-i</h4><p>我们看到了将-v标志与cURL一起使用如何向我们显示HTTP请求和响应的全部细节。如果我们只对查看响应标头感兴趣，那么我们可以使用-I标志发送HEAD请求，并且只显示响应标头。此外，我们可以使用-i标志来显示标题和响应主体（例如HTML代码）。两者的区别在于，-I发送一个HEAD请求（将在下一节中看到），而-I发送我们指定的任何请求并打印头。<br>以下命令显示了使用-I标志的示例输出：</p>
<pre><code>curl -I https://www.inlanefreight.com

Host: www.inlanefreight.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko)
Cookie: cookie1=298zf09hf012fh2; cookie2=u32t4o3tb3gg4
Accept: text/plain
Referer: https://www.inlanefreight.com/
Authorization: BASIC cGFzc3dvcmQK

Date: Sun, 06 Aug 2020 08:49:37 GMT
Connection: keep-alive
Content-Length: 26012
Content-Type: text/html; charset=ISO-8859-4
Content-Encoding: gzip
Server: Apache/2.2.14 (Win32)
Set-Cookie: name1=value1,name2=value2; Expires=Wed, 09 Jun 2021 10:18:14 GMT
WWW-Authenticate: BASIC realm=&quot;localhost&quot;
Content-Security-Policy: script-src &#39;self&#39;
Strict-Transport-Security: max-age=31536000
Referrer-Policy: origin
</code></pre>
<h4 id="设置请求标头：-H"><a href="#设置请求标头：-H" class="headerlink" title="设置请求标头：-H"></a>设置请求标头：-H</h4><p>除了查看标头之外，cURL还允许我们使用-H标志设置请求标头，这将在后面的部分中看到。有些标头，如用户代理或Cookie标头，有自己的标志。例如，我们可以使用-A来设置我们的用户代理，如下所示：</p>
<pre><code>Tanin@htb[/htb]$ curl https://www.inlanefreight.com -A &#39;Mozilla/5.0&#39;

&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;
&lt;html&gt;&lt;head&gt;
...SNIP...
</code></pre>
<p>当我们使用基本的HTTP auth时，我们看到我们的HTTP请求将Authorization头设置为basic YWRtaW46YWRtaW4&#x3D;，这是admin:admin的base64编码值。如果我们使用现代的身份验证方法（例如JWT），则授权类型为Bearer，并且将包含更长的加密令牌。<br>让我们尝试在不提供凭据的情况下手动设置授权，看看它是否允许我们访问该页面。我们可以使用-H标志设置头，并将使用上面HTTP请求中的相同值。我们可以多次添加-H标志来指定多样（ multiple ？）标头：</p>
<pre><code>Tanin@htb[/htb]$ curl -H &#39;Authorization: Basic YWRtaW46YWRtaW4=&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/

&lt;!DOCTYPE html
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
...SNIP...
</code></pre>
<h4 id="HTTP-Basic-Auth：-u"><a href="#HTTP-Basic-Auth：-u" class="headerlink" title="HTTP Basic Auth：-u"></a>HTTP Basic Auth：-u</h4><p>当我们访问本节末尾的练习时，它会提示我们输入用户名和密码。与使用HTTP参数来验证用户凭据（例如POST请求）的常见登录表单不同，这种类型的身份验证使用基本的HTTP身份验证，由web服务器直接处理，以保护特定的页面&#x2F;目录，而无需直接与web应用程序交互。<br>要访问该页面，我们必须输入一对有效的凭据，在这种情况下为admin:admin：</p>
<pre><code>Tanin@htb[/htb]$ curl -u admin:admin http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
...SNIP...
</code></pre>
<p>这一次我们确实得到了响应中的页面。还有另一种方法，我们可以提供基本的HTTP身份验证凭据，它直接通过URL作为（username:password@URL)，正如我们在第一节中所讨论的。如果我们对cURL或浏览器进行同样的尝试，我们也可以访问该页面：</p>
<pre><code>Tanin@htb[/htb]$ curl http://admin:admin@&lt;SERVER_IP&gt;:&lt;PORT&gt;/

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
...SNIP...
</code></pre>
<h4 id="用户代理：-A"><a href="#用户代理：-A" class="headerlink" title="用户代理：-A"></a>用户代理：-A</h4><p>浏览器通常会在请求头中发送用户代理信息，以告诉服务器使用的是哪个浏览器及其版本。而 <code>curl</code> 命令默认情况下发送的请求没有用户代理信息，可能会导致服务器返回不同的结果或者是基于用户代理的动态网页内容。</p>
<p>您可以尝试使用 <code>-A</code> 或 <code>--user-agent</code> 参数在 <code>curl</code> 命令中设置一个用户代理，以模拟特定的浏览器行为，例如：</p>
<pre><code>curl -A &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36&quot; &lt;URL&gt;
</code></pre>
<h4 id="Cookie：-b-–cookie"><a href="#Cookie：-b-–cookie" class="headerlink" title="Cookie：-b  –cookie"></a>Cookie：-b  –cookie</h4><p>浏览器通常会在请求头中发送与该网站相关的 Cookie 信息，以便服务器可以识别用户并提供相应的内容。而 <code>curl</code> 命令默认情况下不会自动发送 Cookie。</p>
<p>如果该网站依赖于 Cookie 来提供特定的内容或功能，您可以使用 <code>-b</code> 或 <code>--cookie</code> 参数在 <code>curl</code> 命令中设置一个或多个 Cookie 值，以模拟浏览器发送的 Cookie 信息。</p>
<pre><code>curl -b &quot;cookie1=value1; cookie2=value2&quot; &lt;URL&gt;
</code></pre>
<h4 id="重定向：-L-–location"><a href="#重定向：-L-–location" class="headerlink" title="重定向：-L   –location"></a>重定向：-L   –location</h4><p>浏览器通常会自动处理服务器返回的重定向（例如，HTTP 3xx 状态码），并在必要时自动跳转到新的 URL。而 <code>curl</code> 命令默认情况下不会自动处理重定向。</p>
<p>如果服务器返回了重定向响应，您可以使用 <code>-L</code> 或 <code>--location</code> 参数来让 <code>curl</code> 命令自动跟随重定向，并获取最终的内容。</p>
<pre><code>curl -L &lt;URL&gt;
</code></pre>
<p>####请求方式：-X</p>
<pre><code>Tanin@htb[/htb]$ curl -X POST -d &#39;username=admin&amp;password=admin&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/

...SNIP...
        &lt;em&gt;Type a city name and hit &lt;strong&gt;Enter&lt;/strong&gt;&lt;/em&gt;
...SNIP...
</code></pre>
<pre><code>Tip: Many login forms would redirect us to a different page once authenticated (e.g. /dashboard.php). If we want to follow the redirection with cURL, we can use the -L flag.
</code></pre>
<h5 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h5><p>​	我们将使用-X POST标志来发送POST请求。然后，为了添加POST数据，我们可以使用-d标志并在其后面添加上述数据，如下所示：</p>
<pre><code>Tanin@htb[/htb]$ curl -X POST -d &#39;username=admin&amp;password=admin&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/

...SNIP...
        &lt;em&gt;Type a city name and hit &lt;strong&gt;Enter&lt;/strong&gt;&lt;/em&gt;
...SNIP...
</code></pre>
<p>有了经过身份验证的cookie，我们现在应该能够与web应用程序交互，而无需每次都提供凭据。为了测试这一点，我们可以在cURL中设置带有-b标志的上述cookie，如下所示：</p>
<pre><code>Tanin@htb[/htb]$ curl -b &#39;PHPSESSID=c1nsa6op7vtk7kdis7bcnbadf1&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/

...SNIP...
        &lt;em&gt;Type a city name and hit &lt;strong&gt;Enter&lt;/strong&gt;&lt;/em&gt;
...SNIP...
</code></pre>
<p>正如我们所看到的，我们确实通过了身份验证并进入了搜索功能。也可以将cookie指定为标头，如下所示：</p>
<pre><code>curl -H &#39;Cookie: PHPSESSID=c1nsa6op7vtk7kdis7bcnbadf1&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/
</code></pre>
<h4 id="格式化json-：-jq"><a href="#格式化json-：-jq" class="headerlink" title="格式化json ：| jq"></a>格式化json ：| jq</h4><p>我们看到结果是以JSON字符串的形式发送的。为了将其正确格式化为JSON格式，我们可以将输出通过管道传输到jq实用程序，后者将正确格式化它。我们还将使用-s静音任何不需要的cURL输出，如下所示：</p>
<pre><code>Tanin@htb[/htb]$ curl http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/api.php/city/london

[&#123;&quot;city_name&quot;:&quot;London&quot;,&quot;country_name&quot;:&quot;(UK)&quot;&#125;]
</code></pre>
<pre><code>Tanin@htb[/htb]$ curl -s http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/api.php/city/london | jq

[
  &#123;
    &quot;city_name&quot;: &quot;London&quot;,
    &quot;country_name&quot;: &quot;(UK)&quot;
  &#125;
]
</code></pre>
<h4 id="静默-s"><a href="#静默-s" class="headerlink" title="静默 -s"></a>静默 -s</h4><p><code>curl -s</code> 是一个命令行工具的选项组合。它使用的是 <code>curl</code> 这个工具，用于在命令行中进行网络数据传输。</p>
<p>具体而言，<code>-s</code> 选项表示 “silent”（静默）的意思。当你在执行 <code>curl</code> 命令时，使用 <code>-s</code> 选项会禁止输出任何进度信息或错误消息。它使得 <code>curl</code> 在执行请求时不会产生额外的输出，只会返回请求的结果。</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2023/06/11/Windows%20Services%20&amp;%20Process/" title="RDP"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: RDP</span></a><a class="button is-default" href="/2023/06/11/YouTube%20Channels/" title="YouTube Channels"><span class="has-text-weight-semibold">Next: YouTube Channels</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="https://github.com/Taninluv/Taninluv.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Taninluv"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Taninluv 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>